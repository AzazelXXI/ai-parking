# Thành phần chính - AI Parking

Tài liệu này liệt kê và mô tả chi tiết các thành phần chính của ứng dụng AI Parking, bao gồm widget Flutter, API endpoints, và module FastAPI.

## 1. Thành phần Frontend (Flutter)

### 1.1. Core Widgets

#### 1.1.1. Màn hình chung

| Widget | Mô tả | Tính năng |
|--------|-------|-----------|
| `AppShell` | Shell chính của ứng dụng | Navigation, theme, localization |
| `SplashScreen` | Màn hình khởi động | Hiển thị logo, kiểm tra đăng nhập |
| `HomeScreen` | Màn hình chính | Dashboard, điều hướng đến các tính năng |
| `SettingsScreen` | Màn hình cài đặt | Quản lý cài đặt ứng dụng |
| `ProfileScreen` | Màn hình hồ sơ người dùng | Xem, chỉnh sửa thông tin cá nhân |
| `NotificationScreen` | Màn hình thông báo | Hiển thị danh sách thông báo |
| `AboutScreen` | Màn hình thông tin | Thông tin về ứng dụng |

#### 1.1.2. Widget UI chung

| Widget | Mô tả | Tính năng |
|--------|-------|-----------|
| `PrimaryButton` | Nút chính | Style mặc định, loading state |
| `SecondaryButton` | Nút phụ | Style thay thế |
| `CustomTextField` | Trường nhập liệu | Validation, custom styling |
| `CustomDropdown` | Dropdown | Tùy chọn, styles |
| `LoadingIndicator` | Chỉ báo đang tải | Hiển thị khi đang tải dữ liệu |
| `ErrorWidget` | Hiển thị lỗi | Thông báo lỗi với retry action |
| `EmptyStateWidget` | Trạng thái trống | Hiển thị khi không có dữ liệu |
| `CustomCard` | Card tùy chỉnh | Style mặc định cho card |
| `RatingWidget` | Widget đánh giá | Hiển thị và chọn rating |
| `ImagePicker` | Chọn ảnh | Chọn ảnh từ camera hoặc thư viện |
| `DateTimePicker` | Chọn ngày giờ | UI chọn ngày và giờ |
| `ConfirmationDialog` | Hộp thoại xác nhận | Xác nhận hành động của người dùng |
| `ToastMessage` | Thông báo toast | Hiển thị thông báo ngắn |
| `BottomSheet` | Bottom sheet | Hiển thị tùy chọn từ dưới lên |

### 1.2. Thành phần xác thực (Authentication)

| Widget | Mô tả | Tính năng |
|--------|-------|-----------|
| `LoginScreen` | Màn hình đăng nhập | Đăng nhập email/password |
| `RegisterScreen` | Màn hình đăng ký | Đăng ký tài khoản mới |
| `ForgotPasswordScreen` | Quên mật khẩu | Khôi phục mật khẩu |
| `OtpVerificationScreen` | Xác thực OTP | Nhập mã OTP từ SMS/email |
| `ResetPasswordScreen` | Đặt lại mật khẩu | Tạo mật khẩu mới |
| `UserVerificationWidget` | Xác thực người dùng | Kiểm tra danh tính |
| `BiometricAuthWidget` | Xác thực sinh trắc học | Vân tay, Face ID |
| `SocialLoginButtons` | Nút đăng nhập mạng xã hội | Google, Facebook, Apple |

### 1.3. Thành phần người dùng cuối (End User)

| Widget | Mô tả | Tính năng |
|--------|-------|-----------|
| `ParkingMapScreen` | Bản đồ bãi đỗ xe | Hiển thị bãi đỗ xe trên bản đồ |
| `NearbyParkingList` | Danh sách bãi đỗ gần đây | Hiển thị bãi đỗ xe gần nhất |
| `ParkingLotDetailScreen` | Chi tiết bãi đỗ | Thông tin chi tiết về bãi đỗ |
| `BookingScreen` | Màn hình đặt chỗ | Đặt chỗ đỗ xe |
| `BookingConfirmationScreen` | Xác nhận đặt chỗ | Xác nhận thông tin đặt chỗ |
| `PaymentScreen` | Màn hình thanh toán | Chọn và xử lý thanh toán |
| `BookingHistoryScreen` | Lịch sử đặt chỗ | Xem lịch sử đặt chỗ |
| `VehicleManagementScreen` | Quản lý xe | Thêm, sửa, xóa xe |
| `ReviewScreen` | Màn hình đánh giá | Đánh giá bãi đỗ xe |
| `NavigationScreen` | Chỉ đường | Hướng dẫn đến bãi đỗ xe |
| `ParkingReceiptScreen` | Hóa đơn đỗ xe | Xem và chia sẻ hóa đơn |
| `ParkingTimerWidget` | Đếm thời gian đỗ xe | Hiển thị thời gian còn lại |
| `SpaceAvailabilityWidget` | Hiển thị chỗ trống | Số lượng chỗ trống theo thời gian thực |

### 1.4. Thành phần chủ bãi đỗ xe (Parking Owner)

| Widget | Mô tả | Tính năng |
|--------|-------|-----------|
| `OwnerDashboardScreen` | Dashboard chủ bãi | Tổng quan thông tin bãi đỗ |
| `ParkingLotManagementScreen` | Quản lý bãi đỗ | Thêm, sửa, xóa bãi đỗ |
| `ParkingSpaceManagementScreen` | Quản lý chỗ đỗ | Cấu hình chỗ đỗ xe |
| `StaffManagementScreen` | Quản lý nhân viên | Thêm, sửa, xóa nhân viên |
| `PriceConfigurationScreen` | Cấu hình giá | Thiết lập giá cho bãi đỗ |
| `RevenueReportScreen` | Báo cáo doanh thu | Xem báo cáo doanh thu |
| `OccupancyReportScreen` | Báo cáo lấp đầy | Tỷ lệ lấp đầy theo thời gian |
| `BookingManagementScreen` | Quản lý đặt chỗ | Xem, xác nhận, hủy đặt chỗ |
| `ReviewManagementScreen` | Quản lý đánh giá | Xem và phản hồi đánh giá |
| `PromotionManagementScreen` | Quản lý khuyến mãi | Tạo và quản lý khuyến mãi |
| `LicenseManagementScreen` | Quản lý license | Xem và gia hạn license |
| `CameraConfigurationScreen` | Cấu hình camera | Thiết lập camera RTSP |
| `AIConfigurationScreen` | Cấu hình AI | Thiết lập mô hình AI |

### 1.5. Thành phần nhân viên bãi đỗ xe (Parking Staff)

| Widget | Mô tả | Tính năng |
|--------|-------|-----------|
| `StaffDashboardScreen` | Dashboard nhân viên | Tổng quan công việc |
| `CheckInScreen` | Màn hình check-in | Xử lý xe vào bãi |
| `CheckOutScreen` | Màn hình check-out | Xử lý xe ra bãi |
| `NFCReaderWidget` | Đọc thẻ NFC | Quét và xử lý thẻ NFC |
| `LicensePlateWidget` | Nhận diện biển số | Chụp và nhận diện biển số |
| `ManualEntryWidget` | Nhập thủ công | Nhập thông tin xe thủ công |
| `ParkingStatusScreen` | Trạng thái bãi đỗ | Xem trạng thái hiện tại |
| `OfflineDataWidget` | Dữ liệu offline | Quản lý dữ liệu khi offline |
| `SyncStatusWidget` | Trạng thái đồng bộ | Hiển thị trạng thái đồng bộ |

### 1.6. Thành phần quản lý bãi đỗ xe (Parking Manager)

| Widget | Mô tả | Tính năng |
|--------|-------|-----------|
| `ManagerDashboardScreen` | Dashboard quản lý | Tổng quan quản lý |
| `LiveMonitoringScreen` | Giám sát trực tiếp | Xem tình trạng bãi đỗ theo thời gian thực |
| `StaffPerformanceScreen` | Hiệu suất nhân viên | Đánh giá hiệu suất nhân viên |
| `IncidentReportScreen` | Báo cáo sự cố | Quản lý sự cố |
| `MaintenanceScheduleScreen` | Lịch bảo trì | Lập và theo dõi lịch bảo trì |
| `PeakHourAnalysisWidget` | Phân tích giờ cao điểm | Hiển thị thông tin giờ cao điểm |
| `RevenueProjectionWidget` | Dự báo doanh thu | Dự báo doanh thu theo AI |
| `OccupancyForecastWidget` | Dự báo lấp đầy | Dự báo tỷ lệ lấp đầy |

### 1.7. Thành phần AI và phân tích

| Widget | Mô tả | Tính năng |
|--------|-------|-----------|
| `LicensePlateDetectionWidget` | Nhận diện biển số | Widget camera và nhận diện |
| `ParkingAnalyticsScreen` | Phân tích đỗ xe | Hiển thị phân tích chi tiết |
| `RevenueAnalyticsScreen` | Phân tích doanh thu | Biểu đồ và số liệu doanh thu |
| `TrendAnalysisWidget` | Phân tích xu hướng | Hiển thị xu hướng đỗ xe |
| `PredictionModelWidget` | Mô hình dự đoán | Hiển thị kết quả dự đoán |
| `HeatmapWidget` | Bản đồ nhiệt | Hiển thị khu vực đông/vắng |
| `AIModelStatusWidget` | Trạng thái mô hình AI | Thông tin về mô hình AI đang dùng |

### 1.8. Thành phần offline và đồng bộ

| Widget | Mô tả | Tính năng |
|--------|-------|-----------|
| `OfflineModeIndicator` | Chỉ báo chế độ offline | Hiển thị trạng thái kết nối |
| `SyncManagerWidget` | Quản lý đồng bộ | Kiểm soát quá trình đồng bộ |
| `ConflictResolutionScreen` | Giải quyết xung đột | Giải quyết xung đột dữ liệu |
| `OfflineDataListScreen` | Danh sách dữ liệu offline | Xem dữ liệu chưa đồng bộ |
| `NetworkStatusWidget` | Trạng thái mạng | Theo dõi kết nối mạng |
| `SyncProgressWidget` | Tiến trình đồng bộ | Hiển thị tiến trình đồng bộ |

## 2. Thành phần Backend (FastAPI)

### 2.1. API Endpoints

#### 2.1.1. Authentication Service

| Endpoint | Method | Mô tả |
|----------|--------|-------|
| `/api/auth/register` | POST | Đăng ký người dùng mới |
| `/api/auth/login` | POST | Đăng nhập |
| `/api/auth/refresh-token` | POST | Làm mới token |
| `/api/auth/forgot-password` | POST | Yêu cầu khôi phục mật khẩu |
| `/api/auth/reset-password` | POST | Đặt lại mật khẩu |
| `/api/auth/verify-otp` | POST | Xác thực mã OTP |
| `/api/auth/logout` | POST | Đăng xuất |
| `/api/auth/social-login` | POST | Đăng nhập bằng mạng xã hội |

#### 2.1.2. User Service

| Endpoint | Method | Mô tả |
|----------|--------|-------|
| `/api/users` | GET | Lấy danh sách người dùng |
| `/api/users/{id}` | GET | Lấy thông tin người dùng |
| `/api/users/{id}` | PUT | Cập nhật thông tin người dùng |
| `/api/users/{id}` | DELETE | Xóa người dùng |
| `/api/users/profile` | GET | Lấy thông tin profile |
| `/api/users/profile` | PUT | Cập nhật profile |
| `/api/users/change-password` | POST | Thay đổi mật khẩu |
| `/api/users/roles` | GET | Lấy danh sách vai trò |
| `/api/users/{id}/roles` | PUT | Cập nhật vai trò người dùng |

#### 2.1.3. Vehicle Service

| Endpoint | Method | Mô tả |
|----------|--------|-------|
| `/api/vehicles` | GET | Lấy danh sách xe |
| `/api/vehicles` | POST | Thêm xe mới |
| `/api/vehicles/{id}` | GET | Lấy thông tin xe |
| `/api/vehicles/{id}` | PUT | Cập nhật thông tin xe |
| `/api/vehicles/{id}` | DELETE | Xóa xe |
| `/api/vehicles/plate/{plate_number}` | GET | Tìm xe theo biển số |

#### 2.1.4. Parking Lot Service

| Endpoint | Method | Mô tả |
|----------|--------|-------|
| `/api/parking-lots` | GET | Lấy danh sách bãi đỗ xe |
| `/api/parking-lots` | POST | Thêm bãi đỗ xe mới |
| `/api/parking-lots/{id}` | GET | Lấy thông tin bãi đỗ xe |
| `/api/parking-lots/{id}` | PUT | Cập nhật thông tin bãi đỗ xe |
| `/api/parking-lots/{id}` | DELETE | Xóa bãi đỗ xe |
| `/api/parking-lots/nearby` | GET | Tìm bãi đỗ xe gần nhất |
| `/api/parking-lots/{id}/spaces` | GET | Lấy danh sách chỗ đỗ xe |
| `/api/parking-lots/{id}/status` | GET | Lấy trạng thái bãi đỗ |
| `/api/parking-lots/{id}/reviews` | GET | Lấy đánh giá bãi đỗ |
| `/api/parking-lots/{id}/staff` | GET | Lấy danh sách nhân viên |

#### 2.1.5. Parking Space Service

| Endpoint | Method | Mô tả |
|----------|--------|-------|
| `/api/parking-spaces` | POST | Thêm chỗ đỗ xe mới |
| `/api/parking-spaces/{id}` | GET | Lấy thông tin chỗ đỗ xe |
| `/api/parking-spaces/{id}` | PUT | Cập nhật thông tin chỗ đỗ xe |
| `/api/parking-spaces/{id}` | DELETE | Xóa chỗ đỗ xe |
| `/api/parking-spaces/{id}/status` | PUT | Cập nhật trạng thái chỗ đỗ |
| `/api/parking-spaces/available` | GET | Lấy danh sách chỗ đỗ trống |

#### 2.1.6. Booking Service

| Endpoint | Method | Mô tả |
|----------|--------|-------|
| `/api/bookings` | GET | Lấy danh sách đặt chỗ |
| `/api/bookings` | POST | Tạo đặt chỗ mới |
| `/api/bookings/{id}` | GET | Lấy thông tin đặt chỗ |
| `/api/bookings/{id}` | PUT | Cập nhật thông tin đặt chỗ |
| `/api/bookings/{id}` | DELETE | Hủy đặt chỗ |
| `/api/bookings/{id}/status` | PUT | Cập nhật trạng thái đặt chỗ |
| `/api/bookings/user/{user_id}` | GET | Lấy đặt chỗ theo người dùng |
| `/api/bookings/parking-lot/{parking_lot_id}` | GET | Lấy đặt chỗ theo bãi đỗ |

#### 2.1.7. Parking History Service

| Endpoint | Method | Mô tả |
|----------|--------|-------|
| `/api/parking-history` | GET | Lấy lịch sử đỗ xe |
| `/api/parking-history` | POST | Thêm lịch sử đỗ xe mới |
| `/api/parking-history/{id}` | GET | Lấy thông tin lịch sử đỗ xe |
| `/api/parking-history/{id}` | PUT | Cập nhật thông tin lịch sử đỗ xe |
| `/api/parking-history/check-in` | POST | Ghi nhận xe vào bãi |
| `/api/parking-history/check-out` | POST | Ghi nhận xe ra bãi |
| `/api/parking-history/user/{user_id}` | GET | Lấy lịch sử theo người dùng |
| `/api/parking-history/vehicle/{vehicle_id}` | GET | Lấy lịch sử theo xe |
| `/api/parking-history/parking-lot/{parking_lot_id}` | GET | Lấy lịch sử theo bãi đỗ |
| `/api/parking-history/sync` | POST | Đồng bộ lịch sử offline |

#### 2.1.8. Payment Service

| Endpoint | Method | Mô tả |
|----------|--------|-------|
| `/api/payments` | GET | Lấy danh sách thanh toán |
| `/api/payments` | POST | Tạo thanh toán mới |
| `/api/payments/{id}` | GET | Lấy thông tin thanh toán |
| `/api/payments/{id}` | PUT | Cập nhật thông tin thanh toán |
| `/api/payments/{id}/status` | PUT | Cập nhật trạng thái thanh toán |
| `/api/payments/methods` | GET | Lấy danh sách phương thức thanh toán |
| `/api/payments/methods` | POST | Thêm phương thức thanh toán mới |
| `/api/payments/methods/{id}` | DELETE | Xóa phương thức thanh toán |
| `/api/payments/invoices` | GET | Lấy danh sách hóa đơn |
| `/api/payments/invoices/{id}` | GET | Lấy thông tin hóa đơn |
| `/api/payments/invoices/{id}/download` | GET | Tải hóa đơn |

#### 2.1.9. Review Service

| Endpoint | Method | Mô tả |
|----------|--------|-------|
| `/api/reviews` | GET | Lấy danh sách đánh giá |
| `/api/reviews` | POST | Thêm đánh giá mới |
| `/api/reviews/{id}` | GET | Lấy thông tin đánh giá |
| `/api/reviews/{id}` | PUT | Cập nhật thông tin đánh giá |
| `/api/reviews/{id}` | DELETE | Xóa đánh giá |
| `/api/reviews/user/{user_id}` | GET | Lấy đánh giá theo người dùng |
| `/api/reviews/parking-lot/{parking_lot_id}` | GET | Lấy đánh giá theo bãi đỗ |

#### 2.1.10. Notification Service

| Endpoint | Method | Mô tả |
|----------|--------|-------|
| `/api/notifications` | GET | Lấy danh sách thông báo |
| `/api/notifications` | POST | Tạo thông báo mới |
| `/api/notifications/{id}` | GET | Lấy thông tin thông báo |
| `/api/notifications/{id}` | PUT | Cập nhật thông tin thông báo |
| `/api/notifications/{id}` | DELETE | Xóa thông báo |
| `/api/notifications/{id}/read` | PUT | Đánh dấu đã đọc |
| `/api/notifications/user/{user_id}` | GET | Lấy thông báo theo người dùng |
| `/api/notifications/push-token` | POST | Đăng ký token cho push notification |

#### 2.1.11. License Service

| Endpoint | Method | Mô tả |
|----------|--------|-------|
| `/api/licenses` | GET | Lấy danh sách license |
| `/api/licenses` | POST | Tạo license mới |
| `/api/licenses/{id}` | GET | Lấy thông tin license |
| `/api/licenses/{id}` | PUT | Cập nhật thông tin license |
| `/api/licenses/{id}/status` | GET | Kiểm tra trạng thái license |
| `/api/licenses/{id}/renew` | POST | Gia hạn license |
| `/api/licenses/packages` | GET | Lấy danh sách gói license |
| `/api/licenses/validate` | POST | Xác thực license key |
| `/api/licenses/expiring-soon` | GET | Lấy danh sách license sắp hết hạn |

#### 2.1.12. NFC Service

| Endpoint | Method | Mô tả |
|----------|--------|-------|
| `/api/nfc-cards` | GET | Lấy danh sách thẻ NFC |
| `/api/nfc-cards` | POST | Đăng ký thẻ NFC mới |
| `/api/nfc-cards/{id}` | GET | Lấy thông tin thẻ NFC |
| `/api/nfc-cards/{id}` | PUT | Cập nhật thông tin thẻ NFC |
| `/api/nfc-cards/{id}` | DELETE | Xóa thẻ NFC |
| `/api/nfc-cards/uid/{uid}` | GET | Tìm thẻ theo UID |
| `/api/nfc-cards/vehicle/{vehicle_id}` | GET | Lấy thẻ theo xe |

#### 2.1.13. AI Service

| Endpoint | Method | Mô tả |
|----------|--------|-------|
| `/api/ai/license-plate-recognition` | POST | Nhận diện biển số xe |
| `/api/ai/demand-forecast` | GET | Dự báo nhu cầu đỗ xe |
| `/api/ai/revenue-optimization` | GET | Tối ưu hóa doanh thu |
| `/api/ai/models` | GET | Lấy danh sách mô hình AI |
| `/api/ai/models/{id}` | GET | Lấy thông tin mô hình AI |
| `/api/ai/models/{id}/download` | GET | Tải mô hình AI offline |
| `/api/ai/models/{id}/performance` | GET | Xem hiệu suất mô hình AI |

#### 2.1.14. Analytics Service

| Endpoint | Method | Mô tả |
|----------|--------|-------|
| `/api/analytics/parking-lot/{id}/usage` | GET | Phân tích sử dụng bãi đỗ |
| `/api/analytics/parking-lot/{id}/revenue` | GET | Phân tích doanh thu |
| `/api/analytics/parking-lot/{id}/peak-hours` | GET | Phân tích giờ cao điểm |
| `/api/analytics/parking-lot/{id}/occupancy` | GET | Phân tích tỷ lệ lấp đầy |
| `/api/analytics/user/{id}/behavior` | GET | Phân tích hành vi người dùng |
| `/api/analytics/dashboard/owner/{id}` | GET | Dashboard cho chủ bãi |
| `/api/analytics/dashboard/manager/{id}` | GET | Dashboard cho quản lý |
| `/api/analytics/reports/generate` | POST | Tạo báo cáo tùy chỉnh |
| `/api/analytics/reports/{id}/download` | GET | Tải báo cáo |

#### 2.1.15. Sync Service

| Endpoint | Method | Mô tả |
|----------|--------|-------|
| `/api/sync` | POST | Đồng bộ dữ liệu offline |
| `/api/sync/status/{device_id}` | GET | Kiểm tra trạng thái đồng bộ |
| `/api/sync/conflicts` | GET | Lấy danh sách xung đột |
| `/api/sync/conflicts/{id}` | PUT | Giải quyết xung đột |
| `/api/sync/data-package` | GET | Lấy gói dữ liệu cho hoạt động offline |
| `/api/sync/devices` | GET | Lấy danh sách thiết bị đã đăng ký |
| `/api/sync/devices` | POST | Đăng ký thiết bị mới |

### 2.2. FastAPI Modules

#### 2.2.1. Core Modules

| Module | Mô tả | Chức năng chính |
|--------|-------|----------------|
| `core.config` | Cấu hình ứng dụng | Quản lý cấu hình, biến môi trường |
| `core.security` | Bảo mật | JWT, mã hóa password, RBAC |
| `core.database` | Kết nối cơ sở dữ liệu | ORM, migration, connection pools |
| `core.cache` | Cache | Redis cache, memoization |
| `core.logging` | Logging | Cấu hình và xử lý logs |
| `core.exceptions` | Xử lý ngoại lệ | Custom exceptions, error handlers |
| `core.middleware` | Middleware | Request/response middleware |
| `core.utils` | Tiện ích | Helper functions |
| `core.tasks` | Task background | Celery, background tasks |

#### 2.2.2. Business Logic Modules

| Module | Mô tả | Chức năng chính |
|--------|-------|----------------|
| `services.auth` | Xử lý xác thực | Login, register, token management |
| `services.user` | Quản lý người dùng | CRUD operations for users |
| `services.parking` | Quản lý bãi đỗ xe | CRUD và logic bãi đỗ xe |
| `services.booking` | Quản lý đặt chỗ | Xử lý đặt chỗ và hủy |
| `services.payment` | Quản lý thanh toán | Xử lý thanh toán và hoàn tiền |
| `services.notification` | Quản lý thông báo | Gửi và quản lý thông báo |
| `services.analytics` | Phân tích dữ liệu | Phân tích và báo cáo |
| `services.license` | Quản lý license | Xử lý license và gia hạn |
| `services.nfc` | Xử lý NFC | Quản lý thẻ NFC |
| `services.sync` | Đồng bộ dữ liệu | Logic đồng bộ offline/online |

#### 2.2.3. AI Modules

| Module | Mô tả | Chức năng chính |
|--------|-------|----------------|
| `ai.license_plate` | Nhận diện biển số | OCR và nhận diện biển số |
| `ai.demand_forecast` | Dự báo nhu cầu | Mô hình dự báo nhu cầu đỗ xe |
| `ai.price_optimization` | Tối ưu hóa giá | Thuật toán tối ưu giá |
| `ai.anomaly_detection` | Phát hiện bất thường | Phát hiện hành vi bất thường |
| `ai.image_processing` | Xử lý hình ảnh | Xử lý ảnh từ camera |
| `ai.model_manager` | Quản lý mô hình | Tải và cập nhật mô hình AI |

#### 2.2.4. Infrastructure Modules

| Module | Mô tả | Chức năng chính |
|--------|-------|----------------|
| `infra.storage` | Lưu trữ | Object storage, file management |
| `infra.email` | Email | Gửi email, template email |
| `infra.sms` | SMS | Gửi SMS, OTP |
| `infra.push` | Push notification | Firebase Cloud Messaging |
| `infra.payment_gateway` | Cổng thanh toán | Tích hợp các cổng thanh toán |
| `infra.map` | Bản đồ | Tích hợp API bản đồ |
| `infra.camera` | Camera | Kết nối với camera RTSP |
| `infra.monitoring` | Giám sát | Prometheus, health checks |

## 3. Công nghệ và thư viện

### 3.1. Flutter (Frontend)

| Thư viện | Mục đích | Phiên bản |
|----------|---------|-----------|
| `flutter_bloc` | State management | ^8.1.1 |
| `dio` | HTTP client | ^4.0.6 |
| `get_it` | Dependency injection | ^7.2.0 |
| `shared_preferences` | Local storage | ^2.0.15 |
| `sqflite` | SQLite database | ^2.2.0 |
| `google_maps_flutter` | Google Maps integration | ^2.2.1 |
| `firebase_core` | Firebase core | ^2.4.0 |
| `firebase_messaging` | Push notifications | ^14.1.4 |
| `camera` | Camera access | ^0.10.0 |
| `flutter_nfc_reader` | NFC reading | ^0.1.0 |
| `tflite` | TensorFlow Lite | ^1.1.2 |
| `charts_flutter` | Data visualization | ^0.12.0 |
| `flutter_local_notifications` | Local notifications | ^12.0.4 |
| `connectivity_plus` | Network connectivity | ^3.0.2 |
| `flutter_offline` | Offline handling | ^2.1.0 |
| `image_picker` | Image selection | ^0.8.6 |
| `url_launcher` | URL launching | ^6.1.7 |
| `intl` | Internationalization | ^0.17.0 |
| `cached_network_image` | Image caching | ^3.2.3 |
| `flutter_secure_storage` | Secure storage | ^7.0.1 |
| `flutter_rating_bar` | Rating UI | ^4.0.1 |

### 3.2. FastAPI (Backend)

| Thư viện | Mục đích | Phiên bản |
|----------|---------|-----------|
| `fastapi` | Web framework | ^0.89.1 |
| `uvicorn` | ASGI server | ^0.20.0 |
| `sqlalchemy` | ORM | ^1.4.46 |
| `alembic` | Database migrations | ^1.9.2 |
| `pydantic` | Data validation | ^1.10.4 |
| `passlib` | Password hashing | ^1.7.4 |
| `python-jose` | JWT | ^3.3.0 |
| `python-multipart` | Form data | ^0.0.5 |
| `psycopg2-binary` | PostgreSQL driver | ^2.9.5 |
| `redis` | Redis client | ^4.4.2 |
| `celery` | Task queue | ^5.2.7 |
| `pillow` | Image processing | ^9.4.0 |
| `opencv-python` | Computer vision | ^4.7.0 |
| `tensorflow` | Deep learning | ^2.11.0 |
| `scikit-learn` | Machine learning | ^1.2.0 |
| `pandas` | Data analysis | ^1.5.2 |
| `numpy` | Numerical computing | ^1.24.1 |
| `requests` | HTTP client | ^2.28.2 |
| `pytest` | Testing | ^7.2.1 |
| `gunicorn` | Production server | ^20.1.0 |
| `prometheus-client` | Metrics | ^0.16.0 |
| `python-dotenv` | Environment variables | ^0.21.0 |
| `pydantic-settings` | Settings management | ^2.0.0 |
| `fastapi-jwt-auth` | JWT authentication | ^0.5.0 |
| `tenacity` | Retry logic | ^8.1.0 |
| `websockets` | WebSockets | ^10.4 |

## Kết luận

Tài liệu này đã liệt kê và mô tả chi tiết các thành phần chính của ứng dụng AI Parking, bao gồm các widget Flutter, API endpoints, và module FastAPI. Các thành phần này được thiết kế để hỗ trợ đầy đủ các tính năng yêu cầu, đồng thời đảm bảo tính mở rộng và bảo trì.

---
*Cập nhật: Đã bổ sung các thành phần liên quan đến quét thẻ NFC, nhận diện biển số xe tự động bằng AI offline, xử lý offline và đồng bộ hóa dữ liệu, quản lý license và thông báo gia hạn.*
